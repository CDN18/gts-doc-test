{{- /*
// GoToSocial
// Copyright (C) GoToSocial Authors admin@gotosocial.org
// SPDX-License-Identifier: AGPL-3.0-or-later
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.
//
// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/ -}}

{{- define "description" -}}
{{- if .instance.Description }}
{{ .instance.Description | noescape }}
{{- else }}
<p>No description has yet been set for this instance.<p>
{{- end }}
{{- end -}}

{{- with . }}
<section class="excerpt-top">
    home to <span class="count">{{- .instance.Stats.user_count -}}</span> users
    who posted <span class="count">{{- .instance.Stats.status_count -}}</span> statuses,
    federating with <span class="count">{{- .instance.Stats.domain_count -}}</span> other instances.
</section>
<main class="about">
    <section>
        <h3 id="about">About {{ .instance.Title -}}</h3>
        {{- with . }}
        {{- include "description" . | indent 2 | noescape }}
        {{- end }}
    </section>
    <section>
        <h3 id="contact">Admin Contact</h3>
        {{- if .instance.ContactAccount }}
        <a href="{{- .instance.ContactAccount.URL -}}" class="account-card">
            <img class="avatar" src="{{- .instance.ContactAccount.Avatar -}}" alt=""/>
            <h3>
                {{- if .instance.ContactAccount.DisplayName -}}
                {{- emojify .instance.ContactAccount.Emojis (escape .instance.ContactAccount.DisplayName) -}}
                {{- else -}}
                {{- .instance.ContactAccount.Username -}}
                {{- end -}}
            </h3>
            <span>@{{- .instance.ContactAccount.Username -}}</span>
        </a>
        {{- else }}
        <p>This instance has not yet set a contact account.</p>
        {{- end }}
        {{- if .instance.Email }}
        <p>Email: <a href="mailto:{{- .instance.Email -}}">{{- .instance.Email -}}</a></p>
        {{- else }}
        <p>This instance has not yet set a contact email address.</p>
        {{- end }}
    </section>
    <section>
        <h3 id="languages">Languages</h3>
        {{- if .languages }}
        <p>This instance prefers the following languages:</p>
        <ol>
            {{- range .languages }}
            <li>{{- . -}}</li>
            {{- end }}
        </ol>
        {{- else }}
        <p>This instance does not have any preferred languages.</p> 
        {{- end }}
    </section>
    <section>
        <h3 id="rules">Instance Rules</h3>
        <ol>
            {{- range .instance.Rules }}
            <li>{{- .Text -}}</li>
            {{- end }}
        </ol>
    </section>
    <section>
        <h3 id="features">Instance Features</h3>
        <ul>
            <li>
                {{- if not .instance.Registrations }}
                Registration is disabled; new signups are currently closed for this instance.
                {{- else }}
                Registration is enabled; new signups can be submitted to this instance.
                {{- if .instance.ApprovalRequired }}
                Admin approval is required for new registrations.
                {{- else }}
                Admin approval is not required for registrations;
                new signups will be automatically approved (pending email confirmation).
                {{- end }}
                {{- end }}
            </li>
            {{- if .instance.Configuration.Accounts.AllowCustomCSS }}
            <li>
                Users are allowed to set
                <a href="https://docs.gotosocial.org/en/latest/user_guide/custom_css/" target="_blank" rel="noopener noreferrer">Custom CSS</a>
                for their profiles.
            </li>
            {{- end }}
            <li>
                Statuses can contain up to {{ .instance.Configuration.Statuses.MaxCharacters }} characters,
                and {{ .instance.Configuration.Statuses.MaxMediaAttachments }} media attachments.
            </li>
            <li>
                Polls can have up to {{ .instance.Configuration.Polls.MaxOptions }} options,
                with {{ .instance.Configuration.Polls.MaxCharactersPerOption }} characters per option.
            </li>
        </ul>
    </section>
    <section>
        <h3 id="moderated-servers">Moderated servers</h3>
        <p>
            ActivityPub instances exchange (federate) data with other instances,
            including accounts and statuses. This can be prevented for specific domains
            by suspending (aka blocking) them. None of their content is stored, and
            interaction with their users is blocked both ways.
        </p>
        <p>
            {{- if .blocklistExposed }}
            <a href="/about/suspended">View the list of suspended domains</a>
            {{- else }}
            This instance does not publically share this list.
            {{- end }}
        </p>
    </section>
</main>
{{- end }}